(()=>{"use strict";class e{constructor(e,t,s){var i=s.handleCardClick;this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=i}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".elements__card").cloneNode(!0)}_setEventListeners(){this._cardImage.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)})),this._card.querySelector(".elements__delete").addEventListener("click",(()=>{this._deleteCard()})),this._card.querySelector(".elements__button").addEventListener("click",(e=>{this._likeCard(e)}))}_deleteCard(){this._card.remove(),this._card=null}_likeCard(e){e.target.classList.toggle("elements__button_active")}createCard(){return this._card=this._getTemplate(),this._cardImage=this._card.querySelector(".elements__img"),this._cardTitle=this._card.querySelector(".elements__title"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._card}}class t{constructor(e,t){this._formElement=t,this._config=e,this._inputs=[...this._formElement.querySelectorAll(this._config.inputSelector)],this._submitButton=this._formElement.querySelector(this._config.submitButtonSelector)}_handleSubmit(e){e.preventDefault()}_isInputValid(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hideInputError(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._config.errorClass),e.classList.remove(this._config.inputErrorClass)}_showInputError(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._config.errorClass),e.classList.add(this._config.inputErrorClass)}_resetInputsErrors(){this._inputs.forEach((e=>{this._hideInputError(e)}))}_setFormListeners(){this._formElement.addEventListener("submit",(e=>{this._handleSubmit(e)})),this._formElement.addEventListener("input",(()=>{this.setSubmitButtonState()})),this._inputs.forEach((e=>{e.addEventListener("input",(()=>this._isInputValid(e)))})),this.setSubmitButtonState()}setSubmitButtonState(){this._submitButton.disabled=!this._formElement.checkValidity(),this._submitButton.classList.toggle(this._config.inactiveButtonClass,!this._formElement.checkValidity())}resetValidation(){this._formElement.reset(),this._resetInputsErrors()}enableValidation(){this._setFormListeners()}}function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{constructor(e){s(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),s(this,"_handleClickClose",(e=>{e.target.classList.contains("popup_opened")&&this.close(),e.target.classList.contains("popup__close")&&this.close()})),this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup_opened"),this._setEventListeners()}close(){this._popup.classList.remove("popup_opened"),this._removeEventListeners()}_setEventListeners(){document.addEventListener("keydown",this._handleEscClose),this._popup.addEventListener("click",this._handleClickClose)}_removeEventListeners(){document.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("click",this._handleClickClose)}}class r extends i{constructor(e,t){var s,i;super(e),i=e=>{e.preventDefault(),this._submitHandler(this._getInputValues()),this.close()},(s="_submitForm")in this?Object.defineProperty(this,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[s]=i,this._submitHandler=t,this._form=this._popup.querySelector(".popup__form"),this._inputList=this._form.querySelectorAll(".popup__input"),this._formValues={}}_getInputValues(){return this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}_setEventListeners(){super._setEventListeners(),this._form.addEventListener("submit",this._submitForm)}_removeEventListeners(){super._removeEventListeners(),this._form.removeEventListener("submit",this._submitForm)}close(){super.close(),this._form.reset()}}var o={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},n=document.querySelector(".popup_edit"),a=(document.querySelector(".popup_add"),document.querySelector(".popup__form_edit")),u=document.querySelector(".popup__form_add"),l=n.querySelector(".popup__input_type_name"),p=n.querySelector(".popup__input_type_description"),_=document.querySelector(".profile__title"),c=document.querySelector(".profile__subtitle"),d=document.querySelector(".profile__button-edit"),h=document.querySelector(".profile__button-add"),m=new class{constructor(e){var t=e.userName,s=e.userAboutMe;this._userName=t,this._userAboutMe=s}getUserInfo(){return{profileName:this._userName.textContent,profileAboutme:this._userAboutMe.textContent}}setUserInfo(e){var t=e.profileName,s=e.profileAboutme;this._userName.textContent=t,this._userAboutMe.textContent=s}}({userName:_,userAboutMe:c}),f=new r(".popup_edit",(e=>m.setUserInfo(e)));d.addEventListener("click",(()=>{g.resetValidation();var e=m.getUserInfo();l.value=e.profileName,p.value=e.profileAboutme,g.setSubmitButtonState(),f.open()}));var b=new class extends i{constructor(e){super(e),this._popupImage=this._popup.querySelector(".popup__image"),this._popupFigcaption=this._popup.querySelector(".popup__figcaption")}open(e,t){this._popupFigcaption.textContent=e,this._popupImage.src=t,this._popupImage.alt=e,super.open()}}(".popup_big");function v(t){return new e(t,".template",{handleCardClick:(e,t)=>{b.open(e,t)}}).createCard()}var E=new class{constructor(e,t){var s=e.items,i=e.renderer;this._items=s,this._renderer=i,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(){this._items.forEach((e=>{var t=this._renderer(e);this.addItem(t)}))}}({items:[{name:"Ёлка",link:"https://images.unsplash.com/photo-1609009755337-df397a1aa480?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=735&q=80"},{name:"Париж",link:"https://images.unsplash.com/photo-1639562427517-593c20c356b0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Собака",link:"https://images.unsplash.com/photo-1611253550249-a1fc4e0b90e3?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=765&q=80"},{name:"Печенье",link:"https://images.unsplash.com/photo-1639610806386-661d00972b55?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Кофе",link:"https://images.unsplash.com/photo-1632588417408-2ae5f733e4ec?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1493&q=80"},{name:"Автомобиль",link:"https://images.unsplash.com/photo-1639696307229-0c944a9126e5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=764&q=80"}],renderer:v},".elements");E.renderItems();var x=new r(".popup_add",(e=>{var t=v({name:e.cardName,link:e.cardLink});E.addItem(t)}));h.addEventListener("click",(function(){S.resetValidation(),S.setSubmitButtonState(),x.open()}));var S=new t(o,u),g=new t(o,a);S.enableValidation(),g.enableValidation()})();